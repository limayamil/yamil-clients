@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: 210 33% 99%;
  --foreground: 222 47% 11%;
  --muted: 215 20% 94%;
  --muted-foreground: 215 16% 47%;
  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 11%;
  --card: 0 0% 100%;
  --card-foreground: 222 47% 11%;
  --border: 215 19% 90%;
  --input: 215 19% 90%;
  --ring: 217 91% 60%;
  --radius: 16px;
}

.dark {
  --background: 220 15% 8%;
  --foreground: 220 15% 95%;
  --muted: 220 15% 12%;
  --muted-foreground: 220 8% 70%;
  --popover: 220 15% 10%;
  --popover-foreground: 220 15% 95%;
  --card: 220 15% 11%;
  --card-foreground: 220 15% 95%;
  --border: 220 15% 18%;
  --input: 220 15% 16%;
  --ring: 217 91% 65%;
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
  }

  /* Dark mode specific overrides - simplified to avoid circular dependencies */
  .dark .bg-gradient-to-br.from-brand-50\/70.to-brand-100\/50 {
    @apply from-slate-900/90 to-slate-800/50;
  }

  .dark .shadow-xl {
    @apply shadow-2xl shadow-black/20;
  }

  /* Status colors for dark mode */
  .dark .text-green-600 {
    @apply text-green-400;
  }

  .dark .text-yellow-600 {
    @apply text-yellow-400;
  }

  .dark .text-red-600 {
    @apply text-red-400;
  }

  .dark .text-emerald-600 {
    @apply text-emerald-400;
  }

  .dark .text-amber-600 {
    @apply text-amber-400;
  }

  .dark .text-blue-600 {
    @apply text-blue-400;
  }

  .dark .bg-green-50 {
    @apply bg-green-950/20;
  }

  .dark .bg-yellow-50 {
    @apply bg-yellow-950/20;
  }

  .dark .bg-red-50 {
    @apply bg-red-950/20;
  }

  .dark .bg-emerald-50 {
    @apply bg-emerald-950/20;
  }

  .dark .bg-amber-50 {
    @apply bg-amber-950/20;
  }

  .dark .bg-blue-50 {
    @apply bg-blue-950/20;
  }
}

/* Rich Text Content - Estilos para listas */
.rich-text-content ul {
  list-style-type: disc !important;
  margin-left: 1.5rem !important;
  margin-top: 0.5rem !important;
  margin-bottom: 0.5rem !important;
}

.rich-text-content ol {
  list-style-type: decimal !important;
  margin-left: 1.5rem !important;
  margin-top: 0.5rem !important;
  margin-bottom: 0.5rem !important;
}

.rich-text-content li {
  margin-top: 0.25rem !important;
  margin-bottom: 0.25rem !important;
  padding-left: 0.25rem !important;
  display: list-item !important;
}

/* Ensure nested paragraphs in list items don't add extra margin */
.rich-text-content li p {
  margin: 0 !important;
  display: inline !important;
}

/* TipTap Editor Styles */
.ProseMirror ul {
  list-style-type: disc !important;
  margin-left: 1.5rem !important;
  margin-top: 0.5rem !important;
  margin-bottom: 0.5rem !important;
}

.ProseMirror ol {
  list-style-type: decimal !important;
  margin-left: 1.5rem !important;
  margin-top: 0.5rem !important;
  margin-bottom: 0.5rem !important;
}

.ProseMirror li {
  margin-top: 0.25rem !important;
  margin-bottom: 0.25rem !important;
  padding-left: 0.25rem !important;
  display: list-item !important;
}

.ProseMirror li p {
  margin: 0 !important;
  display: inline !important;
}

/* Mobile-safe utilities to prevent horizontal overflow */
.mobile-safe-container {
  max-width: calc(100vw - 2rem);
  overflow-x: hidden;
}

.mobile-text-safe {
  overflow: hidden;
  text-overflow: ellipsis;
  word-break: break-word;
  min-width: 0;
}

.mobile-flex-safe {
  min-width: 0;
  max-width: 100%;
}

/* Ensure all main containers never exceed viewport width */
@media (max-width: 640px) {
  .container, .max-w-full {
    max-width: calc(100vw - 1rem) !important;
  }

  /* Prevent grid overflow on mobile */
  .grid-mobile-safe {
    grid-template-columns: 1fr !important;
  }

  /* Force single column layout for complex grids on mobile */
  .sm\\:grid-cols-2, .sm\\:grid-cols-3, .lg\\:grid-cols-2, .lg\\:grid-cols-3 {
    grid-template-columns: 1fr !important;
  }

  /* Ensure horizontal scrolling containers have proper constraints */
  .overflow-x-auto {
    max-width: calc(100vw - 2rem);
  }

  /* Stage-specific mobile optimizations */
  .stage-dates-grid {
    display: flex !important;
    flex-direction: column !important;
    gap: 0.75rem !important;
  }

  /* Aggressive badge truncation for very small screens */
  .stage-badge-mobile {
    max-width: 60px !important;
    font-size: 0.625rem !important;
  }

  /* Stage component content wrapping */
  .stage-component-content {
    word-break: break-word !important;
    overflow-wrap: break-word !important;
    hyphens: auto !important;
  }

  /* Stage container extra safety */
  .stage-container-mobile {
    max-width: calc(100vw - 1.5rem) !important;
    overflow: hidden !important;
  }

  /* Panel-specific mobile safety */
  .panel-mobile-safe {
    max-width: calc(100vw - 1rem) !important;
    overflow-x: hidden !important;
  }

  /* Compact buttons for panels */
  .panel-button-mobile {
    max-width: 120px !important;
    font-size: 0.75rem !important;
  }

  /* URL and email truncation */
  .url-mobile-safe {
    max-width: 200px !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
  }

  /* Form layouts for mobile panels */
  .panel-form-mobile {
    display: flex !important;
    flex-direction: column !important;
    gap: 0.75rem !important;
  }
}

